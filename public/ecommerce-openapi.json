{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["App"]}},"/products":{"get":{"operationId":"ProductsController_getProducts","parameters":[{"name":"page","required":false,"in":"query","schema":{"example":1,"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"example":5,"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Products"}}}}}},"summary":"Listar productos (paginado)","tags":["products"]},"post":{"operationId":"ProductsController_createProduct","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Products"}}}}},"security":[{"bearer":[]}],"summary":"Crear producto","tags":["products"]}},"/products/{id}":{"get":{"operationId":"ProductsController_getProduct","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Products"}}}}},"summary":"Obtener producto por ID","tags":["products"]},"put":{"operationId":"ProductsController_updateProduct","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}}},"responses":{"200":{"description":"Actualizado"}},"security":[{"bearer":[]}],"summary":"Actualizar producto","tags":["products"]},"delete":{"operationId":"ProductsController_deleteProduct","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"Eliminado"}},"security":[{"bearer":[]}],"summary":"Eliminar producto","tags":["products"]}},"/products/seeder":{"post":{"operationId":"ProductsController_addProducts","parameters":[],"responses":{"201":{"description":"Seed ejecutado"}},"security":[{"bearer":[]}],"summary":"Cargar productos (seeder)","tags":["products"]}},"/users":{"get":{"operationId":"UsersController_getUsers","parameters":[{"name":"page","required":true,"in":"query","schema":{"type":"string"}},{"name":"limit","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["users"]}},"/users/{id}":{"get":{"operationId":"UsersController_getUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"bearer":[]}],"tags":["users"]},"put":{"operationId":"UsersController_updateUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["users"]},"delete":{"operationId":"UsersController_deleteUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"security":[{"bearer":[]}],"tags":["users"]}},"/auth":{"get":{"operationId":"AuthController_getAuth","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}},"summary":"Estado del módulo de autenticación","tags":["auth"]}},"/auth/signin":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"201":{"description":"Token emitido","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Usuario logueado"},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}}}}},"summary":"Iniciar sesión (email/password)","tags":["auth"]}},"/auth/signup":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"Usuario creado (sin password)"}},"summary":"Registrar usuario (con confirmación de password)","tags":["auth"]}},"/categories":{"get":{"operationId":"CategoriesController_getCategories","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Categories"}}}}}},"summary":"Listar categorías","tags":["categories"]}},"/categories/seeder":{"get":{"operationId":"CategoriesController_addCategories","parameters":[],"responses":{"200":{"description":"Seed ejecutado"}},"summary":"Cargar categorías (seeder)","tags":["categories"]}},"/orders":{"post":{"operationId":"OrdersController_createOrder","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Orders"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Crear orden de compra","tags":["orders"]}},"/orders/{id}":{"get":{"operationId":"OrdersController_getOrder","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Orders"}}}},"401":{"description":"Unauthorized"}},"security":[{"bearer":[]}],"summary":"Obtener orden por ID (con detalle)","tags":["orders"]}},"/files/uploadImage/{id}":{"post":{"operationId":"FileUploadController_uploadImage","parameters":[{"name":"id","required":true,"in":"path","schema":{"format":"uuid","type":"string"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"201":{"description":"Imagen actualizada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadImageResponseDto"}}}},"400":{"description":"Carga fallida"}},"security":[{"bearer":[]}],"summary":"Subir imagen a Cloudinary y actualizar imgUrl del producto","tags":["files"]}}},"info":{"title":"Proyecto M4-Back","description":"App desarrollada con NestJS","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"Users":{"type":"object","properties":{"id":{"type":"string","description":"Identificador único del usuario (UUID).","example":"b8d9d2d1-3e4a-4c55-9e1a-8d2f6c9a1b23"},"name":{"type":"string","description":"Debe ser un string de máximo 50 caracteres","example":"Test User 01"},"email":{"type":"string","description":"Debe ser un email de formato válido","example":"testuser01@test.com"},"password":{"type":"string","description":"Debe contener una minúscula, una mayúscula y un caracter especial, entre 8 y 15 caracteres","example":"aaaB33##"},"phone":{"type":"number","description":"Debe ser un número","example":"12345678"},"country":{"type":"string","description":"Debe tener entre 5 y 20 caracteres","example":"Test country"},"address":{"type":"string","description":"Debe tener entre 3 y 80 caracteres","example":"Test street"},"city":{"type":"string","description":"Debe tener entre 5 y 20 caracteres","example":"Test city"},"isAdmin":{"type":"boolean"},"orders":{"type":"array","items":{"$ref":"#/components/schemas/Orders"}}},"required":["id","name","email","password","isAdmin","orders"]},"Orders":{"type":"object","properties":{"id":{"type":"string","description":"uuid v4 generado por la BDD"},"date":{"format":"date-time","type":"string","description":"Fecha yyyy-mm-dd","example":"2025-08-12"},"orderDetails":{"$ref":"#/components/schemas/OrderDetails"},"user":{"$ref":"#/components/schemas/Users"}},"required":["id","date","orderDetails","user"]},"OrderDetails":{"type":"object","properties":{"id":{"type":"string","description":"Identificador único del detalle de la orden(UUID)","example":"8e2b3b9a-4e77-4a7d-9a4e-1f0c8d2e3f4a"},"price":{"type":"number","description":"Precio total del detalle (decimal con 2 decimales).","example":"1499.90"},"order":{"$ref":"#/components/schemas/Orders"},"products":{"type":"array","items":{"$ref":"#/components/schemas/Products"}}},"required":["id","price","order","products"]},"Products":{"type":"object","properties":{"id":{"type":"string","description":"Identificador único del producto (UUID).","example":"7f2a0a64-6c9c-4d69-b1f3-1a0b9f2a3c4d"},"description":{"type":"string","description":"Descripción detallada del producto","example":"Audífonos inalámbricos con cancelación de ruido y 30h de batería."},"price":{"type":"number","description":"Precio del producto (decimal con 2 decimales).","example":"1299.99"},"stock":{"type":"number","description":"Unidades disponibles en inventario.","example":"150"},"imgUrl":{"type":"string","description":"URL de la imagen del producto."},"name":{"type":"string"},"category":{"$ref":"#/components/schemas/Categories"},"orderDetails":{"type":"array","items":{"$ref":"#/components/schemas/OrderDetails"}}},"required":["id","description","price","stock","imgUrl","name","category","orderDetails"]},"Categories":{"type":"object","properties":{"id":{"type":"string","description":"Identificador único de la categoría(UUID).","example":"6a9f1a6b-2c1d-4b0a-9f7e-3f2b1c4d5e6f"},"name":{"type":"string","description":"Nombre único de la categoría","example":"Electrónica"},"products":{"type":"array","items":{"$ref":"#/components/schemas/Products"}}},"required":["id","name","products"]},"CreateProductDto":{"type":"object","properties":{"name":{"type":"string","maxLength":50,"example":"Logitech G502"},"description":{"type":"string","example":"Gaming mouse"},"price":{"type":"number","minimum":0,"example":39.99},"stock":{"type":"number","minimum":0,"example":12},"imgUrl":{"type":"string","format":"uri","example":"https://example.com/image.jpg"},"categoryId":{"type":"string","format":"uuid"}},"required":["name","description","price","stock","categoryId"]},"UpdateProductDto":{"type":"object","properties":{"name":{"type":"string","maxLength":50},"description":{"type":"string"},"price":{"type":"number","minimum":0,"example":49.99},"stock":{"type":"number","minimum":0,"example":8},"imgUrl":{"type":"string","format":"uri","example":"https://example.com/image.jpg"},"categoryId":{"type":"string","format":"uuid"}}},"UpdateUserDto":{"type":"object","properties":{}},"LoginUserDto":{"type":"object","properties":{"email":{"type":"string","maxLength":50,"format":"email","example":"user@mail.com"},"password":{"type":"string","minLength":8,"maxLength":15,"example":"P@ssw0rd1!"}},"required":["email","password"]},"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","minLength":3,"maxLength":80,"description":"Debe ser un string entre 3 y 80 caracteres","example":"Jane Doe"},"email":{"type":"string","maxLength":50,"format":"email","description":"Debe ser un email de formato válido","example":"jane@mail.com"},"password":{"type":"string","minLength":8,"maxLength":15,"pattern":"/.*[a-z].*/","description":"Debe contener una minúscula, una mayúscula y un caracter especial, entre 8 y 15 caracteres","example":"P@ssw0rd1!"},"confirmPassword":{"type":"string","description":"Debe ser igual al password","example":"P@ssw0rd1!"},"address":{"type":"string","minLength":3,"maxLength":80,"description":"Debe tener entre 3 y 80 caracteres","example":"Av. Siempre Viva 742"},"phone":{"type":"number","description":"Debe ser un número","example":5551234567},"country":{"type":"string","minLength":5,"maxLength":20,"description":"Debe tener entre 5 y 20 caracteres","example":"Mexico"},"city":{"type":"string","minLength":5,"maxLength":20,"description":"Debe tener entre 5 y 20 caracteres","example":"Test city"}},"required":["name","email","password","confirmPassword","phone"]},"ProductOrderDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid"}},"required":["id"]},"CreateOrderDto":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"},"products":{"minItems":1,"example":[{"id":"0b6c6b7e-2f2b-4a2d-b3a0-7d2d1b3f5d60"}],"type":"array","items":{"$ref":"#/components/schemas/ProductOrderDto"}}},"required":["userId","products"]},"UploadImageResponseDto":{"type":"object","properties":{"message":{"type":"string"},"imageUrl":{"type":"string","example":"https://res.cloudinary.com/<cloud>/image/upload/abc123.jpg"}},"required":["message","imageUrl"]}}}}